name: 'Update translation files'
description: 'Updates the translation files that live within the /po folder.'

runs:
  using: "composite"
  steps:

    - name: install dependencies
      run: sudo apt install gettext qttools5-dev-tools
      shell: bash


    - name: generate Language Files
      run: |
        echo "Generating language files for module: ${{ github.event.repository.name }}"
        cd ../
        ${{ github.action_path }}/generateLanguageFiles.sh ${{ github.event.repository.name }} ${{ github.action_path }}
        # do this twice because when the files don't exists yet it doesn't quite work
        ${{ github.action_path }}/generateLanguageFiles.sh ${{ github.event.repository.name }} ${{ github.action_path }}
      shell: bash

    - name: push to upstream
      run: ${{ github.action_path }}/updateUpstream.sh
      shell: bash